
# ğŸ¥ Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª ÙˆØ§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø°ÙƒÙŠØ© Ù„Ù„Ù…Ø³ØªØ´ÙÙ‰ | Smart Hospital Alerts & Reports System

## ğŸ‡¸ğŸ‡¦ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©

Ù‡Ø°Ø§ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¹Ø¨Ø§Ø±Ø© Ø¹Ù† Ø£Ø¯Ø§Ø© Ø®ÙÙŠÙØ© Ø§Ù„ÙˆØ²Ù† ØªØ¹Ù…Ù„ ÙƒÙ€ **Poller** Ù„Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„Ø·Ø¨ÙŠØ© Ù…Ù† Ù…Ù„Ù Google Sheets (Ù…Ù†Ø´ÙˆØ± ÙƒÙ€ CSV)ØŒ ÙˆØªÙ‚ÙˆÙ… Ø¨Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ù…Ù‡ÙŠÙƒÙ„Ø© Ø¥Ù„Ù‰ Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Telegram Ø§Ù„Ø®Ø§ØµØ© Ø¨Ø§Ù„Ø£Ù‚Ø³Ø§Ù… (Ù…Ø«Ù„ Ø§Ù„Ø·ÙˆØ§Ø±Ø¦ ÙˆØ§Ù„Ø¨Ø§Ø·Ù†Ø©). ÙƒÙ…Ø§ ÙŠØ­ØªÙˆÙŠ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¹Ù„Ù‰ Ø³ÙƒØ±Ø¨Øª Ø¥Ø¶Ø§ÙÙŠ **Reporter** ÙŠÙ‚ÙˆÙ… Ø¨Ø¥Ù†Ø´Ø§Ø¡ ØªÙ‚Ø±ÙŠØ± Ù…Ù„Ø®Øµ ÙƒÙ„ 6 Ø³Ø§Ø¹Ø§Øª Ø¹Ù† Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª Ø®Ù„Ø§Ù„ Ø¢Ø®Ø± 24 Ø³Ø§Ø¹Ø©.

### âš™ï¸ Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª
- Ù…Ø²Ø§Ù…Ù†Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ© Ù„Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª ÙƒÙ„ Ø¯Ù‚ÙŠÙ‚Ø© (Ø£Ùˆ Ø­Ø³Ø¨ Ø§Ù„ØªÙ‡ÙŠØ¦Ø©).
- Ø¯Ø¹Ù… Ù‚ÙˆØ§Ù„Ø¨ Ø±Ø³Ø§Ø¦Ù„ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ© Ø¹Ø¨Ø± Ù…Ù„Ù `templates.json`.
- Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ù…Ø¨Ø§Ø´Ø±Ø© Ø¥Ù„Ù‰ Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Telegram Ù„Ù„Ø£Ù‚Ø³Ø§Ù….
- Ø­ÙØ¸ Ø­Ø§Ù„Ø© Ø¢Ø®Ø± Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„Ù…Ø±Ø³Ù„Ø© ÙÙŠ Ù…Ù„Ù `state.json` Ø¹Ù„Ù‰ Volume.
- Ø³ÙƒØ±Ø¨Øª ØªÙ‚Ø±ÙŠØ± (reporter.py) ÙŠØ±Ø³Ù„ Ù…Ù„Ø®Øµ ÙƒÙ„ 6 Ø³Ø§Ø¹Ø§Øª.
- Ø¯Ø¹Ù… ØªØ¹Ø¯Ø¯ Ø§Ù„Ù‚Ù†ÙˆØ§Øª Ù…Ø³ØªÙ‚Ø¨Ù„Ù‹Ø§ (Telegram Ùˆ SMS).

### ğŸ“‚ Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹
- `poller.py`: Ø§Ù„Ø³ÙƒØ±Ø¨Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ù„Ù…Ø²Ø§Ù…Ù†Ø© Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª ÙˆØ¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª.
- `reporter.py`: Ø³ÙƒØ±Ø¨Øª Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø¯ÙˆØ±ÙŠØ©.
- `config.py`: ØªØ­Ù…ÙŠÙ„ Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø© ÙˆØ¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹.
- `data/updates.csv`: Ø§Ù„Ù…ØµØ¯Ø± Ø§Ù„Ù…Ø­Ø¯Ø« (ÙŠØªÙ… Ø³Ø­Ø¨Ù‡ Ù…Ù† Google Sheets).
- `data/templates.json`: Ù‚ÙˆØ§Ù„Ø¨ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„.
- `/data/state.json`: Ø­Ø§Ù„Ø© Ø¢Ø®Ø± Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª (Volume).

### ğŸ”‘ Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦ÙŠØ© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
- `DATA_DIR=data`
- `STATE_JSON=/data/state.json`
- `SYNC_UPDATES_URL=<Ø±Ø§Ø¨Ø· Google Sheets CSV>`
- `SYNC_ONCALL_URL=<Ø±Ø§Ø¨Ø· oncall.csv>`
- `SYNC_STAFF_URL=<Ø±Ø§Ø¨Ø· staff.csv>`
- `TELEGRAM_BOT_TOKEN=<ØªÙˆÙƒÙ† Ø§Ù„Ø¨ÙˆØª>`
- `TELEGRAM_CHAT_IDS={"Ø§Ù„Ø·ÙˆØ§Ø±Ø¦":"<id>","Ø§Ù„Ø¨Ø§Ø·Ù†Ø©":"<id>"}`

#### Ù…ØªØºÙŠØ±Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© Ù„Ù„ØªÙ‚Ø§Ø±ÙŠØ±
- `REPORT_STATE=/data/report_state.json`
- `REPORT_HOURS=0,6,12,18`
- `REPORT_LOOKBACK_HOURS=24`

### ğŸš€ Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„ØªØ´ØºÙŠÙ„
1. Ø¶Ø¨Ø· Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø© ÙÙŠ Railway (Ø£Ùˆ Ø£ÙŠ Ù…Ù†ØµØ© Ø§Ø³ØªØ¶Ø§ÙØ©).
2. ÙˆØ¶Ø¹ Ø§Ù„Ù…Ù„ÙØ§Øª `poller.py`, `reporter.py`, `config.py`, Ùˆ`data/templates.json`.
3. ØªØ¹Ø¯ÙŠÙ„ `Procfile` Ù„ÙŠØ­ØªÙˆÙŠ:
   ```
   web: python poller.py
   reporter: python reporter.py
   ```
4. Ù†Ø´Ø± Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙˆØªØ´ØºÙŠÙ„Ù‡.


---

## ğŸ‡¬ğŸ‡§ English Version

This project is a lightweight **Poller** that continuously syncs medical updates from a published Google Sheets CSV and pushes structured notifications to Telegram groups mapped to hospital departments (e.g., ER, Internal Medicine). It also includes a **Reporter** script that generates 6-hourly summary reports covering the last 24 hours.

### âš™ï¸ Features
- Automatic sync every minute (configurable).
- Dynamic message templating via `templates.json`.
- Sends alerts directly to Telegram department groups.
- Persists processed state in `/data/state.json` (Volume).
- Periodic reporting (`reporter.py`) every 6 hours.
- Future support for multiple channels (Telegram, SMS).

### ğŸ“‚ Project Structure
- `poller.py`: Main script for updates sync & alerts.
- `reporter.py`: Script for scheduled reports.
- `config.py`: Loads environment variables & config.
- `data/updates.csv`: Source file (synced from Google Sheets).
- `data/templates.json`: Message templates.
- `/data/state.json`: Processed state (Volume).

### ğŸ”‘ Required Environment Variables
- `DATA_DIR=data`
- `STATE_JSON=/data/state.json`
- `SYNC_UPDATES_URL=<Google Sheets CSV link>`
- `SYNC_ONCALL_URL=<oncall.csv link>`
- `SYNC_STAFF_URL=<staff.csv link>`
- `TELEGRAM_BOT_TOKEN=<Bot Token>`
- `TELEGRAM_CHAT_IDS={"ER":"<id>","Internal":"<id>"}`

#### Extra for Reports
- `REPORT_STATE=/data/report_state.json`
- `REPORT_HOURS=0,6,12,18`
- `REPORT_LOOKBACK_HOURS=24`

### ğŸš€ How to Run
1. Configure environment variables in Railway (or any hosting platform).
2. Include `poller.py`, `reporter.py`, `config.py`, and `data/templates.json`.
3. Update `Procfile` with:
   ```
   web: python poller.py
   reporter: python reporter.py
   ```
4. Deploy & run.
